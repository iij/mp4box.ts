import { Mp4Box} from "../";
import { SampleParams } from "../types";

export function make(mp4box: Mp4Box, params: SampleParams | SampleParams[] | undefined = undefined): Uint8Array {
  const width = mp4box.width;
  const height = mp4box.height;
  return new Uint8Array([
    0x00, 0x00, 0x00, // reserved
    0x00, 0x00, 0x00, // reserved
    0x00, 0x01,       // data_reference_index
    0x00, 0x00,       // pre defined
    0x00, 0x00,       // reserved
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, // pre defined
    (width >> 8)  & 0xff,
    width         & 0xff,
    (height >> 8) & 0xff,
    height        & 0xff,
    0x00, 0x48, 0x00, 0x00, // h resolution
    0x00, 0x48, 0x00, 0x00, // v resolution
    0x00, 0x00, 0x00, 0x00, // reserved
    0x00, 0x01, // frame count
    0x08, 0x69, 0x69, 0x6a, 0x73, 0x68, 0x6f, 0x74, 0x73,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x18, // depth
    0x11, 0x11, // predefined
  ]);
}
